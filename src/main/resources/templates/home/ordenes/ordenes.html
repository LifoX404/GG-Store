<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/public :: layout(~{::title}, ~{::main}, ~{::pageStyles})}">

<head>

    <title>Mis √ìrdenes</title>

    <th:block th:fragment="pageStyles">
        <link rel="stylesheet" th:href="@{/css/common/public.css}">
        <link rel="stylesheet" th:href="@{/css/common/navbar.css}">
        <link rel="stylesheet" th:href="@{/css/common/footer.css}">
        <link rel="stylesheet" th:href="@{/css/home/ordenes.css}">
    </th:block>

</head>

<body>
    <!-- Navbar incluido -->
    <nav th:replace="~{fragments/navbar :: navbar}"></nav>

    <div class="container">
        <div class="page-header">
            <h1 class="page-title">Mis √ìrdenes</h1>
            <p class="page-subtitle">Gestiona y revisa el historial de tus pedidos</p>
        </div>

        <div class="orders-grid">
            <!-- Ejemplo de orden con datos din√°micos -->
            <div class="order-card" th:each="orden : ${ordenes}">
                <div class="order-header">
                    <div class="order-number">
                        Orden #<span th:text="${orden.codigoOrden}">12345</span>
                    </div>
                    <div class="order-date" th:text="${orden.fechaOrden}">15/06/2024</div>
                </div>

                <div class="order-details">
                    <div class="detail-item">
                        <span class="detail-label">Total</span>
                        <span class="detail-value total-amount">S/ <span
                                th:text="${orden.totalOrden}">299.99</span></span>
                    </div>

                    <div class="detail-item">
                        <span class="detail-label">M√©todo de Pago</span>
                        <div class="payment-method">
                            <span th:text="${orden.metodoPago}">Tarjeta de Cr√©dito</span>
                        </div>
                    </div>

                    <div class="detail-item">
                        <span class="detail-label">Estado</span>
                        <span class="status-badge" th:classappend="${orden.estadoOrden.name() == 'PENDIENTE' ? 'status-pending' : 
                                               orden.estadoOrden.name() == 'CONFIRMADA' ? 'status-confirmed' : 
                                               orden.estadoOrden.name() == 'PROCESANDO' ? 'status-processing' : 
                                               orden.estadoOrden.name() == 'ENVIADO' ? 'status-shipped' : 
                                               orden.estadoOrden.name() == 'ENTREGADO' ? 'status-delivered' : 
                                               'status-cancelled'}" th:text="${orden.estadoOrden}">Pendiente</span>
                    </div>
                </div>

                <div class="observations" th:if="${orden.observaciones != null and orden.observaciones != ''}">
                    <strong>Observaciones:</strong> <span th:text="${orden.observaciones}">Entrega en horario de
                        oficina</span>
                </div>

                <div class="order-actions">
                    <form th:action="@{/ordenes/{codigo}/base64(codigo=${orden.codigoOrden})}" method="get"
                        class="print-form">
                        <button type="submit" class="action-btn btn-print">
                            üñ®Ô∏è Imprimir
                        </button>
                    </form>
                </div>
            </div>

            <!-- Estado vac√≠o cuando no hay √≥rdenes -->
            <div class="empty-state" th:if="${ordenes == null or ordenes.empty}">
                <div class="empty-state-icon">üõí</div>
                <h2 class="empty-state-title">No tienes √≥rdenes a√∫n</h2>
                <p class="empty-state-text">Cuando realices tu primera compra, aparecer√° aqu√≠</p>
                <a href="/productos" class="action-btn btn-primary">
                    üõçÔ∏è Explorar Productos
                </a>
            </div>
        </div>
    </div>

    <!-- Footer incluido -->
    <footer th:replace="~{fragments/footer :: footer}"></footer>
</body>

</html>